<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel='stylesheet', href='/stylesheets/style.css'>
  <title> patient dashboard</title>
</head>
  <body>
    <header>
      <%- include ('partials/header.ejs') %>
    </header>

    <a href="/account/home">Go back Home</a><br><br>
    <h1>WELCOME TO PATIENT DASHBOARD</h1>

    <!-- patients detailsS -->
    <div>
      <h1>You are logged in as: <%= user.firstName %> </h1>
      <b><p>Your Email is: <%= user.email %> </p></b>
    </div>


    <h2>Available Providers</h2>
    <ul>
      <% if (typeof providers !== 'undefined' && providers.length) { %>
        <% providers.forEach(provider => { %>
          <li>
            <%= provider.first_name %> <%= provider.last_name %>
            <form action="/patients/book" method="POST">
              <input type="hidden" name="providerId" value="<%= provider.provider_id %>">
              <input type="date" name="date" required>
              <input type="time" name="time" required>
              <button type="submit">Request Appointment</button>
            </form>
          </li>
        <% }); %>
      <% } else { %>
        <li>No providers available.</li>
      <% } %>
    </ul>

    <h3>Your Appointments</h3>
    <ul>
      <% if (typeof appointments !== 'undefined' && appointments.length) { %>
        <% appointments.forEach(appointment => { %>
          <li>
            <p>
              <strong>Provider:</strong> <%= appointment.provider_first_name %> <%= appointment.provider_last_name %><br>
              <strong>Date:</strong> <%= appointment.appointment_date %><br>
              <strong>Time:</strong> <%= appointment.appointment_time %><br>
              <strong>Status:</strong> <%= appointment.status %>
            </p>
          </li>
        <% }); %>
      <% } else { %>
        <li>No appointments found.</li>
      <% } %>
    </ul>

    <!-- footer section  -->
    <footer>
      <%- include ('partials/footer.ejs') %>
    </footer>

  </body>

</html>